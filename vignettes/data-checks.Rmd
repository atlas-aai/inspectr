---
title: "Example Data Checks with **inspectr**"
author: "Jennifer Brussow"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Example Data Checks with inspectr}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, echo = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")

```

```{r, echo = FALSE}
library(inspectr)
data("dataset")
```

## Package format
The **inspectr** package is designed to perform basic data checks without the user needing to understand the intricacies of apply functions.

The functions can be grouped into two categories: column checks and
basic fidelity checks.

### Column check functions
These are the basic functions used to perform checks. Each function checks one column for data fidelity, and functions exist to check that column against one or two additional columns. A data frame and a column name (or names) go in; a filtered set of records exhibiting issues comes out (either as a dataframe or as an .xlsx document - your choice!)

### Basic fidelity check functions
These functions are designed to be used with the column check functions. They perform basic checks on the data, like ensuring that all data in a column are of the same type or ensuring that all values in column 1 are less than their corresponding values in column 2.


## Checking an example dataset
To illustrate how to use these functions, we'll apply some basic checks to a sample dataset:
```{r echo = FALSE}
knitr::kable(dataset, format = "markdown", align = "l", row.names = FALSE)
```


### Single-column checks
The `col_check` function is designed to check a single column of data for fidelity to a given check. Several of the basic functions are appropriate for the single column check: `numeric_check`, `character_check`, `character_blanks_check`, `date_check`, and `val_check`. 

##### Numeric checks
The `numeric_check` function checks to ensure all of the values in the columns contain numeric values. For example, in our example dataset, we want to ensure that all of the IDs in the ID_var column are numeric. 

When we check our dataset with this function, we see that there are two records that have non-numeric characters in their ID variables. By setting `output = FALSE` in the arguments, the function returns a dataframe containing only the records with errors. 
```{r single_col_check1, echo = TRUE, eval = TRUE}
col_check("ID_var", dataset, numeric_check, output = FALSE)
```

```{r single_col_check2, echo = TRUE, eval = TRUE}
col_check("FName", dataset, character_check)

col_check("FName", dataset, character_blanks_check)
```

```{r broken_graveyard, echo = TRUE, eval = TRUE}
##Need to resolve three dots issues for both val_check & date_check
# col_check("Perf_Lvl", dataset, val_check, values = c("Basic", "Intermediate", "Advanced"))
# col_check("Perf_Lvl", dataset, date_check, begin = "06/02/1982", end = "11/11/1986")
```

### Two-column checks
two_col_check("Var1", "Var2", dataset, less_than)
two_col_check("Var1", "Var2", dataset, less_than_equalto)

two_col_check("Var2", "Var1", dataset, greater_than)
two_col_check("Var2", "Var1", dataset, greater_than_equalto)

### Three-column checks
three_col_check(colname1 = "Perf_Lvl", colname2 = "Var1", colname3 = "Var2",
                data = dataset, fun = function(col1, col2, col3){
                  col1 %in% c("Basic", "Intermediate", "Advanced") |
                    (is.na(col1) & (col3 %% 2 ==0) & (col2 %% 2 ==1 ))
})


